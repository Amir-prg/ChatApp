{"version":3,"sources":["components/Chats.module.css","firebase.js","assets/google.svg","components/Login.js","components/Navbar.js","contexts/AuthContextProvider.js","components/Chats.js","App.js","index.js","components/Login.module.css","components/Navbar.module.css"],"names":["module","exports","auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","Login","className","styles","loginPage","loginCard","button","onClick","signInWithRedirect","GoogleAuthProvider","src","google","alt","Navbar","logoutHandler","container","name","logout","AuthContext","React","createContext","AuthContextProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","console","log","push","Provider","value","Chats","useContext","axios","get","headers","email","uid","then","catch","formdata","FormData","append","getFile","photoURL","avatar","post","error","url","fetch","response","blob","data","File","type","signOut","height","projectID","userName","userSecret","App","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b23a0d51.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chats_container__2p7g6\"};","import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nexport const auth = firebase.initializeApp({\r\n    apiKey: \"AIzaSyABsh5RciGSrX2iyjFKTnC1k0vzBEz2UVY\",\r\n    authDomain: \"botogram-ca064.firebaseapp.com\",\r\n    projectId: \"botogram-ca064\",\r\n    storageBucket: \"botogram-ca064.appspot.com\",\r\n    messagingSenderId: \"491761691080\",\r\n    appId: \"1:491761691080:web:622adb07974de4a59a78fd\"\r\n  }).auth();","export default __webpack_public_path__ + \"static/media/google.bb008e2c.svg\";","import React from 'react';\r\nimport firebase from 'firebase/app';\r\nimport { auth } from \"../firebase\";\r\n\r\n// Icons \r\nimport google from \"../assets/google.svg\";\r\n\r\n// Styles\r\nimport styles from \"./Login.module.css\";\r\n\r\nconst Login = () => {\r\n    return (\r\n        <div className={styles.loginPage}>\r\n            <div className={styles.loginCard}>\r\n                <h2>Welcome to Botogram!</h2>\r\n\r\n                <div \r\n                    className={styles.button}\r\n                    onClick={() => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\r\n                >\r\n                    <img src={google} alt=\"google\" /> Sign in with Google\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;","import React from 'react';\r\n\r\n// Styles\r\nimport styles from \"./Navbar.module.css\";\r\n\r\nconst Navbar = ({logoutHandler}) => {\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.name}>\r\n                Botogram\r\n            </div>\r\n            <div className={styles.logout} onClick={logoutHandler}>\r\n                Logout\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Navbar;","import React, { useState, useEffect, Children } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nconst AuthContextProvider = ({children}) => {\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [user, setUser] = useState(false);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        auth.onAuthStateChanged(user => {\r\n            setUser(user);\r\n            setLoading(false);\r\n            console.log(user)\r\n            if(user) history.push(\"/chats\");\r\n        })\r\n    }, [user, history])\r\n\r\n    return (\r\n        <AuthContext.Provider value={user}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContextProvider;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { auth } from '../firebase';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ChatEngine } from \"react-chat-engine\";\r\nimport axios from 'axios';\r\n\r\n// Components\r\nimport Navbar from './Navbar';\r\n\r\n// Styles\r\nimport styles from \"./Chats.module.css\"\r\n\r\n// Context\r\nimport { AuthContext } from \"../contexts/AuthContextProvider\";\r\n\r\nconst Chats = () => {\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const user = useContext(AuthContext);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if(!user) {\r\n            history.push(\"/\");\r\n            return;\r\n        }\r\n\r\n        axios.get(\"https://api.chatengine.io/users/me\", {\r\n            headers: {\r\n                \"project-id\": \"c76b1138-1b35-4092-b0a9-9144cc864d15\",\r\n                \"user-name\": user.email,\r\n                \"user-secret\": user.uid\r\n            }\r\n        })\r\n        .then(() => {\r\n            setLoading(false)\r\n        })\r\n        .catch(() => {\r\n            let formdata = new FormData();\r\n            formdata.append(\"email\", user.email);\r\n            formdata.append(\"username\", user.email);\r\n            formdata.append(\"secret\", user.uid);\r\n            getFile(user.photoURL)\r\n                .then(avatar => {\r\n                    formdata.append(\"avatar\", avatar, avatar.name)\r\n                    axios.post(\"https://api.chatengine.io/users/\", formdata, {\r\n                        headers: {\r\n                            \"private-key\": \"baa875c2-d664-4fa5-a1f4-599fe675ace6\"\r\n                        }\r\n                    })\r\n                    .then(() => setLoading(false))\r\n                    .catch(error => console.log(error))\r\n                    \r\n                })\r\n        })\r\n\r\n    }, [user, history])\r\n\r\n    const getFile = async (url) => {\r\n        const response = await fetch(url);\r\n        const data = await response.blob();\r\n        return new File([data], \"userPhoto.jpg\", {type: \"image/jpeg\"})\r\n    }\r\n\r\n    const logoutHandler = async () => {\r\n        await auth.signOut();\r\n        history.push(\"/\")\r\n    }\r\n\r\n    if (!user || loading) return \"Loading...\"\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <Navbar logoutHandler={logoutHandler} />\r\n\r\n            <ChatEngine\r\n                height=\"calc(100vh - 50px)\"\r\n                projectID=\"c76b1138-1b35-4092-b0a9-9144cc864d15\"\r\n                userName={user.email}\r\n                userSecret={user.uid}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chats;","import { Switch, Route } from \"react-router-dom\";\n\n// Components\nimport Login from \"./components/Login\";\nimport Chats from \"./components/Chats\";\n\n// Contexts\nimport AuthContextProvider from \"./contexts/AuthContextProvider\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AuthContextProvider>\n        <Switch>\n          <Route path=\"/chats\" component={Chats} />\n          <Route path=\"/\"  component={Login} />\n        </Switch>\n      </AuthContextProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginPage\":\"Login_loginPage__3K5ef\",\"loginCard\":\"Login_loginCard__Nii23\",\"button\":\"Login_button__2BrxS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Navbar_container__1g4nL\",\"name\":\"Navbar_name__265pg\",\"logout\":\"Navbar_logout__2WQH6\"};"],"sourceRoot":""}