(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{147:function(e,t,n){e.exports={container:"Chats_container__2p7g6"}},155:function(e,t,n){},340:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(32),o=n.n(r),i=(n(155),n(7)),s=n(64),u=(n(156),s.a.initializeApp({apiKey:"AIzaSyABsh5RciGSrX2iyjFKTnC1k0vzBEz2UVY",authDomain:"botogram-ca064.firebaseapp.com",projectId:"botogram-ca064",storageBucket:"botogram-ca064.appspot.com",messagingSenderId:"491761691080",appId:"1:491761691080:web:622adb07974de4a59a78fd"}).auth()),p=n.p+"static/media/google.bb008e2c.svg",b=n(67),j=n.n(b),l=n(3),d=function(){return Object(l.jsx)("div",{className:j.a.loginPage,children:Object(l.jsxs)("div",{className:j.a.loginCard,children:[Object(l.jsx)("h2",{children:"Welcome to Botogram!"}),Object(l.jsxs)("div",{className:j.a.button,onClick:function(){return u.signInWithRedirect(new s.a.auth.GoogleAuthProvider)},children:[Object(l.jsx)("img",{src:p,alt:"google"})," Sign in with Google"]})]})})},h=n(17),g=n(31),f=n(5),m=n(150),O=n(4),v=n.n(O),x=n(69),_=n.n(x),N=function(e){var t=e.logoutHandler;return Object(l.jsxs)("div",{className:_.a.container,children:[Object(l.jsx)("div",{className:_.a.name,children:"Botogram"}),Object(l.jsx)("div",{className:_.a.logout,onClick:t,children:"Logout"})]})},w=n(147),C=n.n(w),S=c.a.createContext(),k=function(e){var t=e.children,n=Object(a.useState)(!0),c=Object(f.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(!1),p=Object(f.a)(s,2),b=p[0],j=p[1],d=Object(i.f)();return Object(a.useEffect)((function(){u.onAuthStateChanged((function(e){j(e),o(!1),console.log(e),e&&d.push("/chats")}))}),[b,d]),Object(l.jsx)(S.Provider,{value:b,children:!r&&t})},y=function(){var e=Object(a.useState)(!0),t=Object(f.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(S),o=Object(i.f)();Object(a.useEffect)((function(){r?v.a.get("https://api.chatengine.io/users/me",{headers:{"project-id":"c76b1138-1b35-4092-b0a9-9144cc864d15","user-name":r.email,"user-secret":r.uid}}).then((function(){c(!1)})).catch((function(){var e=new FormData;e.append("email",r.email),e.append("username",r.email),e.append("secret",r.uid),s(r.photoURL).then((function(t){e.append("avatar",t,t.name),v.a.post("https://api.chatengine.io/users/",e,{headers:{"private-key":"baa875c2-d664-4fa5-a1f4-599fe675ace6"}}).then((function(){return c(!1)})).catch((function(e){return console.log(e)}))}))})):o.push("/")}),[r,o]);var s=function(){var e=Object(g.a)(Object(h.a)().mark((function e(t){var n,a;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return a=e.sent,e.abrupt("return",new File([a],"userPhoto.jpg",{type:"image/jpeg"}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(g.a)(Object(h.a)().mark((function e(){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.signOut();case 2:o.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!r||n?"Loading...":Object(l.jsxs)("div",{className:C.a.container,children:[Object(l.jsx)(N,{logoutHandler:p}),Object(l.jsx)(m.d,{height:"calc(100vh - 50px)",projectID:"c76b1138-1b35-4092-b0a9-9144cc864d15",userName:r.email,userSecret:r.uid})]})};var B=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(k,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/chats",component:y}),Object(l.jsx)(i.a,{path:"/",component:d})]})})})},I=n(46);o.a.render(Object(l.jsx)(I.a,{children:Object(l.jsx)(B,{})}),document.getElementById("root"))},67:function(e,t,n){e.exports={loginPage:"Login_loginPage__3K5ef",loginCard:"Login_loginCard__Nii23",button:"Login_button__2BrxS"}},69:function(e,t,n){e.exports={container:"Navbar_container__1g4nL",name:"Navbar_name__265pg",logout:"Navbar_logout__2WQH6"}}},[[340,1,2]]]);
//# sourceMappingURL=main.b23a0d51.chunk.js.map